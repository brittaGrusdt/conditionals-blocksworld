<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Tower-Experiment</title>
  </head>
  <body>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>
    <script type="text/javascript" src="01_helper_functions.js"></script>
    <script type="text/javascript" src="02_configuration.js"></script>
    <h1 id="title"></h1>
    <p id="greenBeforeX"></p>
    <p id="greenAfterX"></p>
    <p id="greenBeforeY"></p>
    <p id="greenAfterY"></p>
    <p id="timestamp"></p>
    <!-- install two libraries with npm globally: -->
    <!-- npm install -g underscore -->
    <!-- npm install -g matter-js -->
    <!-- TODO: is there a better way to do this? -->
    <script type="text/javascript" src="./js/matter.js"></script>
    <script type="text/javascript" src="./js/underscore.js"></script>

    <!-- my files -->
    <script type="text/javascript" src="03_helpers_towers.js"></script>
    <script type="text/javascript" src="04_worlds.js"></script>
    <script type="text/javascript" src="05_animation.js"></script>
    <!-- <script type="text/javascript" src="simulations.js"></script> -->
    <script>
    clickOnGetData = function(){
      let results = [];
      dataAll.forEach(function(scene){
        let sceneDef = defineScene(scene);
        let platforms = scene["platform.type"] == "basic2" ?
        [sceneDef.p1, sceneDef.p2] : scene["platform.type"] == "seesaw" ?
        [sceneDef.plank] : [sceneDef.p1];
        let blockData = [scene.id, scene["AC.position"], sceneDef.b1, sceneDef.b2];
        results.push(blockData.concat(platforms))
      });
      downloadSceneDefinitions(results);
    }
    clickOnForward = function(){
      forwardAnimation(worldObjects);
    }
    </script>
    <button id="downloadButton" onclick="clickOnGetData()">Get Data</button>
    <script>
      let idx = Math.floor(Math.random()*10);
      let scene = dataAll[idx];
      let sceneData = defineScene(scene);
      worldObjects = createSceneObjs(scene["platform.type"], sceneData, false);
      setupWorld(worldObjects, document.body)
      showScene();
    </script>
    <button id="forwardButton" onclick="clickOnForward()">Forward</button>
  </body>
</html>
